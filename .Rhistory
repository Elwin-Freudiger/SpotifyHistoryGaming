shiny::runApp()
runApp('test.R')
runApp('test.R')
runApp('test.R')
runApp('test.R')
runApp('test.R')
runApp('test.R')
runApp('test.R')
library(spotifyr)
Sys.setenv(SPOTIFY_CLIENT_ID = '69bcdc7b172e46c99226d49e2017ecb8')
Sys.setenv(SPOTIFY_CLIENT_SECRET = '7dc154279f054c16b62bd3f7894ce289')
access_token <- get_spotify_access_token()
get_tracks(c("4vp2J1l5RD4gMZwGFLfRAu", "4sscDOZCkbLSlDqcCgUJnX"))
x <- get_tracks(c("4vp2J1l5RD4gMZwGFLfRAu", "4sscDOZCkbLSlDqcCgUJnX"))
x.shape()
x.shape
typeof(x)
len(x)
length(x)
View(x)
library(purrr)
?split
split
poop <-  c(1,2,3)
batch_ids <- function(ids, size = 50) {
split(ids, ceiling(seq_along(ids) / size))
}
batch_ids(poop, 1)
batch_ids(poop, 2)
poopy <- batch_ids(poop, 2)
length(poopy)
poopy$1
poopy[1]
poopy[2]
poopy[0]
runApp('test.R')
runApp('test.R')
runApp('test.R')
runApp('test.R')
?map_dbl
View(x)
songs_test <- c("4vp2J1l5RD4gMZwGFLfRAu", "4sscDOZCkbLSlDqcCgUJnX")
track_info <- batch_ids(songs_test) %>%
map_df(~{
Sys.sleep(0.1)
tracks <- get_tracks(.x)
tibble(
trackID = map_chr(tracks, "id", .default = NA),
duration_ms = map_dbl(tracks, "duration_ms", .default = NA),
album_release_date = map_chr(map(tracks, "album"), "release_date", .default = NA),
popularity = map_dbl(tracks, "popularity", .default = NA),
artist_id = map_chr(map(map(tracks, "artists"), 1), "id", .default = NA)
)
})
View(track_info)
?map_df
track_info <- batch_ids(songs_test) %>%
map_df(~{
Sys.sleep(0.1)
tracks <- get_tracks(.x)
})
View(track_info)
track_info <- batch_ids(songs_test) %>%
map_df(~{
Sys.sleep(0.1)
tracks <- get_tracks(.x)
})
track_info <- batch_ids(songs_test) %>%
map_df(~{
Sys.sleep(0.1)
tracks <- get_tracks(.x)
duration_ms <- tracks$duration_ms
})
View(track_info)
View(x)
track_info <- batch_ids(songs_test) %>%
map_df(~{
Sys.sleep(0.1)
tracks <- get_tracks(.x)
duration_ms <- tracks$album.release_date
})
View(track_info)
View(x[[16]][[1]])
track_info <- batch_ids(songs_test) %>%
map_df(~{
Sys.sleep(0.1)
tracks <- get_tracks(.x)
duration_ms <- tracks$album.artists$id
})
View(track_info)
track_info <- batch_ids(songs_test) %>%
map_df(~{
Sys.sleep(0.1)
tracks <- get_tracks(.x)
duration_ms <- tracks$album.artists[['id']]
})
View(track_info)
track_info <- batch_ids(songs_test) %>%
map_df(~{
Sys.sleep(0.1)
tracks <- get_tracks(.x)
duration_ms <- tracks[['album.artists']]$id
})
View(track_info)
track_info <- batch_ids(songs_test) %>%
map_df(~{
Sys.sleep(0.1)
tracks <- get_tracks(.x)
duration_ms <- tracks[['album.artists']][['id']]
})
View(track_info)
track_info <- batch_ids(songs_test) %>%
map_df(~{
Sys.sleep(0.1)
tracks <- get_tracks(.x)
duration_ms <- lapply(tracks$album.artists, function(x) x$id)
})
track_info <- batch_ids(songs_test) %>%
map_df(~{
Sys.sleep(0.1)
tracks <- get_tracks(.x)
duration_ms <- tracks$album.artists[[1]]$id
})
View(track_info)
track_info <- batch_ids(songs_test) %>%
map_df(~{
Sys.sleep(0.1)
tracks <- get_tracks(.x)
duration_ms <- sapply(tracks$album.artists, function(df) df$id[1])
})
View(track_info)
?sapply
View(x)
track_info <- batch_ids(songs_test) %>%
map_df(~{
Sys.sleep(0.1)
tracks <- get_tracks(.x)
duration_ms <- sapply(tracks$album.artists, function(df) df$id[1])
})
View(track_info)
get_artists(c("1yxSLGMDHlW21z4YXirZDS"))
y <- get_artists(c("1yxSLGMDHlW21z4YXirZDS"))
View(y)
View(y[[1]][[1]])
y <- get_artists(c("0UKfenbZb15sqhfPC6zbt3"))
y$genres
"new wave" %in% y$genres
length(y$genres)
typeof(y$gneres)
typeof(y$genres)
View(y)
runApp('test.R')
runApp('test.R')
track_info <- batch_ids(songs_test) %>%
map_df(~{
Sys.sleep(0.1)
tracks <- get_tracks(.x)
tibble(
trackID = tracks$id,
track_duration = tracks$duration_ms,
album_release_date = tracks$album.release_date,
popularity = tracks$popularity,
artist_id = sapply(tracks$album.artists, function(df) df$id[1])
)
})
unique_artist <- unique(track_info$artist_id)
artist_info <- batch_ids(unique_artist) %>%
map_df(~{
Sys.sleep(0.1)
artists <- get_artists(.x)
tibble(
artist_id = artist_info$id,
genres = sapply(artists$genres, function(line) paste(line, collapse = ", "))
)
})
runApp('test.R')
runApp('test.R')
runApp('test.R')
runApp('test.R')
runApp('test.R')
runApp('test.R')
runApp('test.R')
runApp('test.R')
runApp()
runApp('test.R')
runApp('test.R')
